<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF注釈ツール</title>
    <link rel="stylesheet" href="style.css">
    <!-- PDF.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <!-- pdf-lib CDN -->
    <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    <script src="https://unpkg.com/@pdf-lib/fontkit@1.1.1/dist/fontkit.umd.js"></script>
</head>

<body>

    <div id="drop-zone">
        <p>ここにPDFをドラッグ&ドロップしてください</p>
        <p>または</p>
        <label class="file-input-label">
            ファイルを選択
            <input type="file" id="file-input" accept="application/pdf">
        </label>
    </div>

    <header>
        <div>
            <h1>PDF注釈ツール</h1>
            <span class="description">点・テキスト・ハイライト・スタンプを追加できます</span>
        </div>
    </header>

    <main>
        <div id="viewer-container">
            <div id="pdf-wrapper" class="hidden">
                <canvas id="the-canvas"></canvas>
                <div id="annotation-layer"></div>
            </div>
        </div>

        <aside id="sidebar">
            <div class="sidebar-header">
                コメント一覧
                <button id="export-csv" title="CSVエクスポート">CSV</button>
            </div>
            <ul id="comment-list">
                <li class="sidebar-item-empty">注釈はまだありません</li>
            </ul>
        </aside>
    </main>

    <footer>
        <div class="control-group">
            <div class="control-item">
                <button id="undo-btn" title="元に戻す">↶</button>
                <button id="redo-btn" title="やり直す">↷</button>
            </div>
            <div class="control-item">
                <button id="prev-page">◀</button>
                <span id="page-info"><span id="page-num">--</span> / <span id="page-count">--</span></span>
                <button id="next-page">▶</button>
            </div>
        </div>

        <div class="control-group">
            <div class="control-item">
                <span style="font-weight:bold;">モード:</span>
                <label class="radio-label"><input type="radio" name="mode" value="point" checked> 点</label>
                <label class="radio-label"><input type="radio" name="mode" value="text"> テキスト</label>
                <label class="radio-label"><input type="radio" name="mode" value="highlight"> ハイライト</label>
                <label class="radio-label"><input type="radio" name="mode" value="whiteout"> 白塗り</label>
                <label class="radio-label"><input type="radio" name="mode" value="stamp"> スタンプ</label>
                <label class="radio-label"><input type="radio" name="mode" value="image"> 画像</label>
            </div>

            <div class="control-item" id="image-controls" style="display:none;">
                <label class="file-input-label" style="padding: 2px 8px; font-size: 0.8rem;">
                    画像追加
                    <input type="file" id="image-input" accept="image/png, image/jpeg" style="display:none;">
                </label>
            </div>

            <div class="control-item" id="stamp-controls" style="display:none;">
                <select id="stamp-type">
                    <option value="ok">OK</option>
                    <option value="review">要確認</option>
                    <option value="fix">修正</option>
                </select>
            </div>

            <div class="control-item" id="style-controls">
                <span>色:</span>
                <label class="radio-label"><input type="radio" name="color" value="blue" checked> <span
                        class="color-sample blue"></span></label>
                <label class="radio-label"><input type="radio" name="color" value="red"> <span
                        class="color-sample red"></span></label>
                <label class="radio-label"><input type="radio" name="color" value="black"> <span
                        class="color-sample black"></span></label>
                <span style="margin-left:5px;">サイズ:</span>
                <span id="point-size-control">
                    <label class="radio-label"><input type="radio" name="size" value="8"> 小</label>
                    <label class="radio-label"><input type="radio" name="size" value="12" checked> 中</label>
                    <label class="radio-label"><input type="radio" name="size" value="16"> 大</label>
                </span>
                <span id="text-size-control" style="display:none;">
                    <input type="number" id="font-size-input" value="14" min="8" max="100"
                        style="width: 50px; padding: 2px;"> px
                    <select id="font-select" style="margin-left: 5px; max-width: 150px;">
                        <optgroup label="ビジネス (ゴシック)">
                            <option value="Noto Sans JP">Noto Sans JP (標準)</option>
                            <option value="BIZ UDPGothic">BIZ UDPGothic</option>
                            <option value="BIZ UDGothic">BIZ UDGothic</option>
                            <option value="Sawarabi Gothic">さわらびゴシック</option>
                            <option value="M PLUS 1p">M PLUS 1p</option>
                            <option value="Zen Kaku Gothic New">Zen 角ゴシック</option>
                            <option value="IBM Plex Sans JP">IBM Plex Sans JP</option>
                        </optgroup>
                        <optgroup label="ビジネス (明朝)">
                            <option value="Noto Serif JP">Noto Serif JP (標準)</option>
                            <option value="BIZ UDPMincho">BIZ UDPMincho</option>
                            <option value="BIZ UDMincho">BIZ UDMincho</option>
                            <option value="Sawarabi Mincho">さわらび明朝</option>
                            <option value="Zen Old Mincho">Zen オールド明朝</option>
                            <option value="Shippori Mincho">しっぽり明朝</option>
                        </optgroup>
                        <optgroup label="モダン・丸文字">
                            <option value="Klee One">Klee One (教科書体)</option>
                            <option value="Kosugi">Kosugi</option>
                            <option value="Zen Maru Gothic">Zen 丸ゴシック</option>
                            <option value="Kosugi Maru">Kosugi Maru</option>
                            <option value="Kiwi Maru">キウイ丸</option>
                        </optgroup>
                        <optgroup label="手書き・ポップ・デザイン">
                            <option value="Yomogi">Yomogi (手書き)</option>
                            <option value="Hachi Maru Pop">ハチまるポップ</option>
                            <option value="RocknRoll One">RocknRoll One</option>
                            <option value="DotGothic16">ドットゴシック</option>
                            <option value="Rampart One">Rampart One (極太)</option>
                            <option value="Reggae One">Reggae One</option>
                        </optgroup>
                    </select>
                </span>
            </div>

            <div class="control-item" id="graph-controls">
                <label class="radio-label">
                    <input type="checkbox" id="graph-mode-chk"> グラフモード (青い点を選択)
                </label>
            </div>
        </div>

        <div class="control-group">
            <button id="print-btn" class="success">印刷 / PDF保存</button>
        </div>
    </footer>

    <script src="script.js"></script>
</body>

</html>